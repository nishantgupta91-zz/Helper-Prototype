/*! helper-prototype 05-10-2015 */
"use strict";angular.module("mainApp",["ngMaterial","ngVideo","ngRoute"]).config(function(a,b){a.icon("text","app/img/icons/underline7.svg",24).icon("line","app/img/icons/horizontal39.svg",24).icon("circle","app/img/icons/circle107.svg",24).icon("rectangle","app/img/icons/photo211.svg",24).icon("triangle","app/img/icons/details.svg",24).icon("pen","app/img/icons/create3.svg",24).icon("eraser","app/img/icons/eraser.svg",24).icon("play","app/img/icons/play106.svg",24).icon("pause","app/img/icons/pause44.svg",24).icon("replay","app/img/icons/replay4.svg",24).icon("add","app/img/icons/add186.svg",24).icon("clear","app/img/icons/brush1.svg",24).icon("close","app/img/icons/close47.svg",24).icon("toolbox","app/img/icons/circles23.svg",24),b.when("/view1",{templateUrl:"partials/view1.html"}).when("/onlineSupport",{templateUrl:"app/partials/onlineSupport.html"}).otherwise({redirectTo:"/onlineSupport"})}).run(function(a,b){var c=["app/img/icons/underline7.svg","app/img/icons/horizontal39.svg","app/img/icons/circle107.svg","app/img/icons/photo211.svg","app/img/icons/details.svg","app/img/icons/create3.svg","app/img/icons/eraser.svg","app/img/icons/play106.svg","app/img/icons/pause44.svg","app/img/icons/replay4.svg","app/img/icons/add186.svg","app/img/icons/brush1.svg","app/img/icons/close47.svg","app/img/icons/circles23.svg"];angular.forEach(c,function(c){a.get(c,{cache:b})})}),angular.module("mainApp").controller("MainController",["$scope","ToolsService","$compile","$mdDialog","$timeout","$mdSidenav","$mdUtil","$log",function(a,b,c,d,e,f,g,h){function i(a){var b=g.debounce(function(){f(a).toggle().then(function(){h.debug("toggle "+a+" is done")})},300);return b}a.resourceDir="app/resources/",console.log("==== main ===="),a.canvasElement=angular.element($("#outputCanvas"))[0],a.ctx=a.canvasElement.getContext("2d"),a.ctx.canvas.width=a.ctx.canvas.offsetWidth,a.ctx.canvas.height=a.ctx.canvas.offsetHeight,a.drawing=!1,a.drawingStyle="Pen",a.strokeColor="black",a.brushThickness=1,a.currentTime=0,a.lastX,a.lastY,a.penClicks=[],a.tempLines=[],a.drawnLines=[],a.tempRectangles=[],a.drawnRectangles=[],a.tempCircles=[],a.drawnCircles=[],a.tempTriangles=[],a.drawnTriangles=[],a.drawnText=[],a.isVideoReady=!1,a.videoEnded=!1,a.isVideoPaused=!0,a.Math=window.Math,a.toggleRight=i("right"),a.savedSnapshotsData=[],a.playerControls=[{name:"Play",icon:"play",show:!0},{name:"Pause",icon:"pause",show:!0},{name:"Play Again",icon:"replay",show:!1}],a.clearDrawings=function(){a.tempCircles=[],a.tempTriangles=[],a.tempLines=[],a.tempRectangles=[],a.drawnCircles=[],a.drawnTriangles=[],a.drawnLines=[],a.drawnRectangles=[],a.penClicks=[],a.videoEnded&&a.drawVideoOnCanvas()},a.clearPenDrawings=function(){a.penClicks=[],a.videoEnded&&a.drawVideoOnCanvas()},a.clearLineDrawings=function(){a.tempLines=[],a.drawnLines=[],a.videoEnded&&a.drawVideoOnCanvas()},a.clearRectangleDrawings=function(){a.tempRectangles=[],a.drawnRectangles=[],a.videoEnded&&a.drawVideoOnCanvas()},a.clearTriangleDrawings=function(){a.tempTriangles=[],a.drawnTriangles=[],a.videoEnded&&a.drawVideoOnCanvas()},a.clearCircleDrawings=function(){a.tempCircles=[],a.drawnCircles=[],a.videoEnded&&a.drawVideoOnCanvas()},a.clearTextDrawings=function(){a.drawnText=[],a.videoEnded&&a.drawVideoOnCanvas()},a.createInputsForText=function(b,d){for(var e="",f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",g=0;5>g;g++)e+=f.charAt(Math.floor(Math.random()*f.length));var h=e+"_container",i=e+"_text",j=e+"_button",k=a.lastX,l=a.lastY,m='{"background":"transparent", "position":"absolute","left":"'+k+'px", "top":"'+l+'px", "width":"25%", "height":"25%"}',n='<md-content id="'+h+"\" ng-style='"+m+"' layout-padding layout='row'><md-input-container><label ng-style='{\"color\":\""+b+'"}\'>Text</label><input id="'+i+'" ng-style=\'{"color":"'+b+'"}\'></md-input-container><md-button id="'+j+'" ng-style=\'{"color":"'+b+"\"}'>Apply</md-button></md-content>",o=c(n)(a);document.getElementById("whiteFrameContainer").appendChild(o[0]),document.getElementById(j).onclick=function(){a.applyText(i,h,k,l,b,d)}},a.saveSnapshot=function(){var b=document.getElementById("videoBackgrounddata"),c=3,e=b.currentTime;d.show({controller:"SnapshotAttributesDialogController",templateUrl:"app/partials/snapshotAttributesDialog.html",locals:{playbackTime:e},parent:angular.element(document.body)}).then(function(b){c=b[0],e=b[1],console.log("duration : "+c),console.log("playbackTime : "+e),a.toggleRight(),a.saveImage(e,c)},function(){console.log("text duration dialog closed")})},a.applyText=function(b,c,d,e,f,g){var h={value:document.getElementById(b).value,left:d,top:e,color:f,duration:i},i=3;a.drawnText.push(h),console.log("duration : "+i),document.getElementById(c).style.display="none"},a.saveImage=function(b,d){var e=document.getElementById("videoBackgrounddata"),f=a.canvasElement.width,g=a.canvasElement.height;a.ctx&&a.ctx.drawImage(e,0,0,f,g);var h=a.ctx.getImageData(0,0,a.canvasElement.width,a.canvasElement.height);console.log("drawing video on canvas..."),a.ctx.putImageData(h,0,0),a.ctx.beginPath(),a.drawPenStrokes(),a.drawRectangleStrokes(),a.drawLineStrokes(),a.drawTriangleStrokes(),a.drawCircleStrokes(),a.drawTextStrokes(),a.clearDrawings();var i='<md-grid-list id="snapshotsList_'+b+'" md-cols="1" md-row-height="'+a.ctx.canvas.width+":"+a.ctx.canvas.height+'" style="border: 1px solid green"><md-grid-tile id="snapshot_'+b+'"><img id="canvasImg_'+b+'" style="position: relative; width: 100%; height: 100%;"><md-grid-tile-footer layout="row" layout-align="space-between center"><h3>Time : '+b+"</h3><h3>Duration : "+d+"</h3></md-grid-tile-footer></md-grid-tile></md-grid-list>",j=c(i)(a);document.getElementById("snapshots").appendChild(j[0]);var k=a.canvasElement.toDataURL();document.getElementById("canvasImg_"+b).src=k;var l={imageId:"canvasImg_"+b,playbackTime:b,duration:d};a.savedSnapshotsData.push(l)},a.mouseDownHandler=function(c){var d=document.getElementById("videoBackgrounddata");if(a.isVideoPaused=d.paused,a.isVideoPaused){null!=b.getTool()&&(a.drawingStyle=b.getTool().name),null!=b.getColor()&&(a.strokeColor=b.getColor().color),null!=b.getBrushThickness()&&(a.brushThickness=b.getBrushThickness()),void 0!==c.offsetX?(a.lastX=c.offsetX,a.lastY=c.offsetY):(a.lastX=c.layerX-c.currentTarget.offsetLeft,a.lastY=c.layerY-c.currentTarget.offsetTop);var e=a.strokeColor,f=a.brushThickness;if("pen"==a.drawingStyle.toLowerCase()){var g={posX:a.lastX,posY:a.lastY,drag:!1,color:e,thickness:f};a.penClicks.push(g)}else if("text"==a.drawingStyle.toLowerCase()){var h=document.getElementById("videoBackgrounddata");h.pause(),a.createInputsForText(e,h)}a.ctx.beginPath(),a.drawing=!0}},a.mouseMoveHandler=function(b){if(a.drawing){console.log("mouse moving over canvas...");var c=0,d=0;void 0!==b.offsetX?(c=b.offsetX,d=b.offsetY):(c=b.layerX-b.currentTarget.offsetLeft,d=b.layerY-b.currentTarget.offsetTop);var e=a.strokeColor,f=a.brushThickness;if("pen"==a.drawingStyle.toLowerCase()){var g={posX:c,posY:d,drag:!0,color:e,thickness:f};a.penClicks.push(g),a.drawPenStrokes()}else if("rectangle"==a.drawingStyle.toLowerCase()){var h={startX:a.lastX,startY:a.lastY,sizeX:c-a.lastX,sizeY:d-a.lastY,color:e,thickness:f};a.tempRectangles.push(h),a.drawRectangleStrokes()}else if("line"==a.drawingStyle.toLowerCase()){var i={startX:a.lastX,startY:a.lastY,endX:c,endY:d,color:e,thickness:f};a.tempLines.push(i),a.drawLineStrokes()}else if("circle"==a.drawingStyle.toLowerCase()){var j={startX:a.lastX,startY:a.lastY,endX:c,endY:d,color:e,thickness:f};a.tempCircles.push(j),a.drawCircleStrokes()}else if("triangle"==a.drawingStyle.toLowerCase()){var k={startX:a.lastX,startY:a.lastY,endX:c,endY:d,thirdX:a.lastX+2*(c-a.lastX),thirdY:a.lastY,color:e,thickness:f};a.tempTriangles.push(k),a.drawTriangleStrokes()}}},a.mouseUpHandler=function(b){a.drawing=!1;var c=0,d=0;void 0!==b.offsetX?(c=b.offsetX,d=b.offsetY):(c=b.layerX-b.currentTarget.offsetLeft,d=b.layerY-b.currentTarget.offsetTop);var e=a.strokeColor,f=a.brushThickness;if("line"==a.drawingStyle.toLowerCase()){var g={startX:a.lastX,startY:a.lastY,endX:c,endY:d,color:e,thickness:f};a.drawnLines.push(g)}else if("rectangle"==a.drawingStyle.toLowerCase()){var h={startX:a.lastX,startY:a.lastY,sizeX:c-a.lastX,sizeY:d-a.lastY,color:e,thickness:f};a.drawnRectangles.push(h)}else if("circle"==a.drawingStyle.toLowerCase()){var i={startX:a.lastX,startY:a.lastY,endX:c,endY:d,color:e,thickness:f};a.drawnCircles.push(i)}else if("triangle"==a.drawingStyle.toLowerCase()){var j={startX:a.lastX,startY:a.lastY,endX:c,endY:d,thirdX:a.lastX+2*(c-a.lastX),thirdY:a.lastY,color:e,thickness:f};a.drawnTriangles.push(j)}},a.reset=function(){a.canvasElement.width=a.canvasElement.width},a.playVideo=function(){if(a.isVideoReady){if(a.videoEnded){a.videoEnded=!1,a.playerControls[0].show=!0,a.playerControls[1].show=!0,a.playerControls[2].show=!1,a.clearDrawings();var b=document.getElementById("videoBackgrounddata");b.currentTime="0",b.play()}a.clearDrawings(),a.drawCanvas()}},a.drawCanvas=function(){var b=document.getElementById("videoBackgrounddata");a.videoEnded=b.ended,a.isVideoPaused=b.paused,a.videoEnded||a.isVideoPaused?a.videoEnded?(a.playerControls[2].show=!0,a.playerControls[0].show=!1,a.playerControls[1].show=!1,console.log("Video Ended. Stopping the video draw on canvas")):a.isVideoPaused&&!a.videoEnded&&console.log("Video Paused. Stopping the video draw on canvas"):(window.requestAnimationFrame?window.requestAnimationFrame(a.drawCanvas):window.msRequestAnimationFrame?window.msRequestAnimationFrame(a.drawCanvas):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(a.drawCanvas):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(a.drawCanvas):setTimeout(a.drawCanvas,16.7),a.drawVideoOnCanvas())},a.drawVideoOnCanvas=function(){var b=document.getElementById("videoBackgrounddata"),c=a.canvasElement.width,d=a.canvasElement.height;a.ctx&&a.ctx.drawImage(b,0,0,c,d)},a.drawTextStrokes=function(){for(var b=0;b<a.drawnText.length;b++)a.ctx.beginPath(),a.ctx.font="10pt Arial",a.ctx.fillStyle=a.drawnText[b].color,a.ctx.fillText(a.drawnText[b].value,a.drawnText[b].left,a.drawnText[b].top)},a.drawPenStrokes=function(){for(var b=1;b<a.penClicks.length;b++)a.ctx.beginPath(),a.penClicks[b].drag?a.ctx.moveTo(a.penClicks[b-1].posX,a.penClicks[b-1].posY):a.ctx.moveTo(a.penClicks[b].posX-1,a.penClicks[b].posY),a.ctx.lineTo(a.penClicks[b].posX,a.penClicks[b].posY),a.ctx.lineWidth=a.penClicks[b].thickness,a.ctx.strokeStyle=a.penClicks[b].color,a.ctx.stroke()},a.drawLineStrokes=function(){a.ctx.beginPath();var b=a.tempLines.length;b>0&&(a.drawVideoOnCanvas(),a.ctx.moveTo(a.tempLines[b-1].startX,a.tempLines[b-1].startY),a.ctx.lineTo(a.tempLines[b-1].endX,a.tempLines[b-1].endY),a.ctx.lineWidth=a.tempLines[b-1].thickness,a.ctx.strokeStyle=a.tempLines[b-1].color,a.ctx.stroke()),a.drawFinalLines(),a.drawFinalTriangles(),a.drawFinalRectangles(),a.drawFinalCircles()},a.drawCircleStrokes=function(){a.ctx.beginPath();var b=a.tempCircles.length;if(b>0){a.drawVideoOnCanvas();var c=.5*(a.tempCircles[b-1].endX-a.tempCircles[b-1].startX),d=.5*(a.tempCircles[b-1].endY-a.tempCircles[b-1].startY),e=a.tempCircles[b-1].startX+c,f=a.tempCircles[b-1].startY+d,g=.01,h=g,i=2*Math.PI-g;for(a.ctx.moveTo(e+c*Math.cos(0),f+d*Math.sin(0));i>h;h+=g)a.ctx.lineTo(e+c*Math.cos(h),f+d*Math.sin(h));a.ctx.closePath(),a.ctx.lineWidth=a.tempCircles[b-1].thickness,a.ctx.strokeStyle=a.tempCircles[b-1].color,a.ctx.stroke()}a.drawFinalLines(),a.drawFinalTriangles(),a.drawFinalRectangles(),a.drawFinalCircles()},a.drawTriangleStrokes=function(){a.ctx.beginPath();var b=a.tempTriangles.length;b>0&&(a.drawVideoOnCanvas(),a.ctx.moveTo(a.tempTriangles[b-1].startX,a.tempTriangles[b-1].startY),a.ctx.lineTo(a.tempTriangles[b-1].endX,a.tempTriangles[b-1].endY),a.ctx.lineTo(a.tempTriangles[b-1].thirdX,a.tempTriangles[b-1].thirdY),a.ctx.lineTo(a.tempTriangles[b-1].startX,a.tempTriangles[b-1].startY),a.ctx.lineWidth=a.tempTriangles[b-1].thickness,a.ctx.strokeStyle=a.tempTriangles[b-1].color,a.ctx.stroke()),a.drawFinalLines(),a.drawFinalTriangles(),a.drawFinalRectangles(),a.drawFinalCircles()},a.drawRectangleStrokes=function(){a.ctx.beginPath();var b=a.tempRectangles.length;b>0&&(a.drawVideoOnCanvas(),a.ctx.rect(a.tempRectangles[b-1].startX,a.tempRectangles[b-1].startY,a.tempRectangles[b-1].sizeX,a.tempRectangles[b-1].sizeY),a.ctx.lineWidth=a.tempRectangles[b-1].thickness,a.ctx.strokeStyle=a.tempRectangles[b-1].color,a.ctx.stroke()),a.drawFinalLines(),a.drawFinalTriangles(),a.drawFinalRectangles(),a.drawFinalCircles()},a.drawFinalCircles=function(){for(var b=0;b<a.drawnCircles.length;b++){a.ctx.beginPath();var c=.5*(a.drawnCircles[b].endX-a.drawnCircles[b].startX),d=.5*(a.drawnCircles[b].endY-a.drawnCircles[b].startY),e=a.drawnCircles[b].startX+c,f=a.drawnCircles[b].startY+d,g=.01,h=g,i=2*Math.PI-g;for(a.ctx.moveTo(e+c*Math.cos(0),f+d*Math.sin(0));i>h;h+=g)a.ctx.lineTo(e+c*Math.cos(h),f+d*Math.sin(h));a.ctx.closePath(),a.ctx.lineWidth=a.drawnCircles[b].thickness,a.ctx.strokeStyle=a.drawnCircles[b].color,a.ctx.stroke()}},a.drawFinalTriangles=function(){for(var b=0;b<a.drawnTriangles.length;b++)a.ctx.beginPath(),a.ctx.moveTo(a.drawnTriangles[b].startX,a.drawnTriangles[b].startY),a.ctx.lineTo(a.drawnTriangles[b].endX,a.drawnTriangles[b].endY),a.ctx.lineTo(a.drawnTriangles[b].thirdX,a.drawnTriangles[b].thirdY),a.ctx.lineTo(a.drawnTriangles[b].startX,a.drawnTriangles[b].startY),a.ctx.lineWidth=a.drawnTriangles[b].thickness,a.ctx.strokeStyle=a.drawnTriangles[b].color,a.ctx.stroke()},a.drawFinalLines=function(){for(var b=0;b<a.drawnLines.length;b++)a.ctx.beginPath(),a.ctx.moveTo(a.drawnLines[b].startX,a.drawnLines[b].startY),a.ctx.lineTo(a.drawnLines[b].endX,a.drawnLines[b].endY),a.ctx.lineWidth=a.drawnLines[b].thickness,a.ctx.strokeStyle=a.drawnLines[b].color,a.ctx.stroke()},a.drawFinalRectangles=function(){for(var b=0;b<a.drawnRectangles.length;b++)a.ctx.beginPath(),a.ctx.rect(a.drawnRectangles[b].startX,a.drawnRectangles[b].startY,a.drawnRectangles[b].sizeX,a.drawnRectangles[b].sizeY),a.ctx.lineWidth=a.drawnRectangles[b].thickness,a.ctx.strokeStyle=a.drawnRectangles[b].color,a.ctx.stroke()},a.playAugmentedVideo=function(){d.show({controller:"AugmentedVideoDialogController",templateUrl:"app/partials/augmentedVideoDialog.html",locals:{canvasWidth:a.canvasElement.width,canvasHeight:a.canvasElement.height,snapshotsData:a.savedSnapshotsData},parent:angular.element(document.body)}).then(function(a){},function(){console.log("text duration dialog closed")})}}]).controller("RightCtrl",function(a,b,c,d){a.close=function(){c("right").close().then(function(){d.debug("close RIGHT is done")})}}).controller("SelectVideoOptionsController",function(a,b){a.items=[{name:"Select Video",icon:"add"}],a.uploadButton=angular.element($("#upload"))[0],a.openFileDialog=function(){a.uploadButton.click()},a.getVideoFile=function(){var c=a.uploadButton.value;if(null!=c){var d=c.split("\\");c=d[d.length-1],b.addSource("mp4",a.resourceDir+c,!0),console.log("video loaded..."),a.isVideoReady=!0,a.clearDrawings(),a.videoEnded=!1}else console.log("Invalid Video Selection")}}).controller("AugmentedVideoDialogController",function(a,b,c,d,e,f){a.augPlayerControls=[{name:"Play",icon:"play",show:!0},{name:"Pause",icon:"pause",show:!0},{name:"Play Again",icon:"replay",show:!1}],a.augCanvasWidth=d,a.augCanvasHeight=e,a.canvasElem=null,a.context=null,a.backgroundObject=document.getElementById("videoBackgrounddata"),a.iterator=0,a.nextSnapshotTime,a.nextImageElem,a.nextDuration,a.stopDrawing=!1,a.videoOnceStarted=!1,a.augmentedVideoDialogIcons=[{name:"Close",icon:"close"}],a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.pauseAugVideo=function(){a.backgroundObject.pause()},a.playAugVideo=function(){a.videoOnceStarted||(a.backgroundObject.currentTime=0),a.backgroundObject.play(),a.nextSnapshotTime=f[a.iterator].playbackTime,a.nextImageElem=document.getElementById(f[a.iterator].imageId),a.nextDuration=f[a.iterator].duration,a.videoOnceStarted=!0,a.drawAugVideo()},a.drawAugVideo=function(){a.stopDrawing||(window.requestAnimationFrame?window.requestAnimationFrame(a.drawAugVideo):window.msRequestAnimationFrame?window.msRequestAnimationFrame(a.drawAugVideo):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(a.drawAugVideo):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(a.drawAugVideo):setTimeout(a.drawAugVideo,16.7),a.drawAugmentedVideoOnCanvas())},a.drawAugmentedVideoOnCanvas=function(){if(a.canvasElem=angular.element($("#augmentedVideoCanvas"))[0],a.canvasElem&&(a.context=a.canvasElem.getContext("2d"),a.context)){a.context.canvas.width=a.context.canvas.offsetWidth,a.context.canvas.height=a.context.canvas.offsetHeight;var c=a.augCanvasWidth,d=a.augCanvasHeight;console.log("drawing augmented video... : "+a.backgroundObject.currentTime),console.log("$scope.nextSnapshotTime : "+a.nextSnapshotTime),console.log("$scope.nextDuration : "+a.nextDuration),Math.abs(a.backgroundObject.currentTime-a.nextSnapshotTime)<.15?(a.backgroundObject.pause(),a.stopDrawing=!0,console.log("Drawing snapshot now....... "),a.context.drawImage(a.nextImageElem,0,0,c,d),a.iterator<f.length-1&&a.iterator++,b(function(){a.updateSnapshotDetails()},1e3*a.nextDuration)):a.context.drawImage(a.backgroundObject,0,0,c,d)}},a.updateSnapshotDetails=function(){console.log("updateSnapshotDetails ..."),a.nextSnapshotTime=f[a.iterator].playbackTime,a.nextImageElem=document.getElementById(f[a.iterator].imageId),a.nextDuration=f[a.iterator].duration,a.stopDrawing=!1,a.backgroundObject.play(),a.backgroundObject.currentTime=a.backgroundObject.currentTime+.5,a.drawAugVideo()}}).controller("SnapshotAttributesDialogController",function(a,b,c){a.attributesDialogIcons=[{name:"Close",icon:"close"}],a.durationSet=3,a.videoplayTime=c,a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){b.hide([a.durationSet,a.videoplayTime])}}).controller("TextDurationDialogController",function(a,b){a.durationDialogIcons=[{name:"Close",icon:"close"}],a.durationSet=3,a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){b.hide(a.durationSet)}}).controller("ClearOptionsController",function(a,b){a.options=[{name:"Clear",icon:"clear"}],a.showClearOptionsToolbox=function(c){a.clearOption="",b.show({templateUrl:"app/partials/clearOptionsGrid.html",controller:"ClearOptionsGridController",targetEvent:c}).then(function(b){"clear lines"==b.name.toLowerCase()?a.clearLineDrawings():"clear rectangles"==b.name.toLowerCase()?a.clearRectangleDrawings():"clear circles"==b.name.toLowerCase()?a.clearCircleDrawings():"clear triangles"==b.name.toLowerCase()?a.clearTriangleDrawings():"clear pen drawings"==b.name.toLowerCase()?a.clearPenDrawings():"clear text"==b.name.toLowerCase()?a.clearTextDrawings():"clear all"==b.name.toLowerCase()&&a.clearDrawings()})}}).controller("ClearOptionsGridController",function(a,b){a.items=[{name:"Clear All",icon:"eraser"},{name:"Clear Pen Drawings",icon:"pen"},{name:"Clear Lines",icon:"line"},{name:"Clear Circles",icon:"circle"},{name:"Clear Rectangles",icon:"rectangle"},{name:"Clear Triangles",icon:"triangle"},{name:"Clear Text",icon:"text"}],a.toolClicked=function(c){var d=a.items[c];b.hide(d)}}).controller("ToolboxController",function(a,b,c){console.log("======== toolbox ============="),a.toolboxIcon=[{name:"Drawing Tools",icon:"toolbox"}],a.cursorIcon="",a.cursorColor="",a.brushThickness=1,a.setTool=function(a,b,d){"item"==d?c.setTool(a):"color"==d&&c.setColor(a),c.setBrushThickness(b)},a.showToolbox=function(c){a.cursorIcon="",a.cursorColor="",b.show({templateUrl:"app/partials/toolboxGrid.html",controller:"ToolboxGridController",targetEvent:c}).then(function(b){if(a.brushThickness=b[1],"item"==b[2]){var c=b[0];a.cursorIcon=c,a.setTool(a.cursorIcon,a.brushThickness,"item")}else if("color"==b[2]){var d=b[0];a.cursorColor=d,a.setTool(a.cursorColor,a.brushThickness,"color")}else a.setTool(b[0],a.brushThickness,b[2])})}}).controller("ToolboxGridController",function(a,b){a.brushThickness=1,a.items=[{name:"Pen",icon:"pen"},{name:"Circle",icon:"circle"},{name:"Line",icon:"line"},{name:"Rectangle",icon:"rectangle"},{name:"Triangle",icon:"triangle"},{name:"Text",icon:"text"}],a.colors=[{name:"Black",color:"black"},{name:"Grey",color:"grey"},{name:"White",color:"white"},{name:"Red",color:"red"},{name:"Orange",color:"orange"},{name:"Yellow",color:"yellow"},{name:"Green",color:"green"},{name:"Blue",color:"blue"},{name:"Purple",color:"purple"},{name:"Brown",color:"brown"}],a.toolClicked=function(c){a.brushThickness=document.getElementById("thicknessSlider").textContent,a.brushThickness=parseInt(a.brushThickness);var d=a.items[c];b.hide([d,a.brushThickness,"item"])},a.colorClicked=function(c){a.brushThickness=document.getElementById("thicknessSlider").textContent,a.brushThickness=parseInt(a.brushThickness);var d=a.colors[c];b.hide([d,a.brushThickness,"color"])},a.setThickness=function(){a.brushThickness=document.getElementById("thicknessSlider").textContent,a.brushThickness=parseInt(a.brushThickness),b.hide([null,a.brushThickness,null])}}),angular.module("mainApp").directive("mainHeaderToolbar",function(){return{restrict:"E",templateUrl:"app/partials/mainHeader.html"}}).directive("myToolbox",function(){return{restrict:"E",$scope:{name:"="},templateUrl:"app/partials/toolbox.html",controller:"ToolboxController"}}).directive("clearButton",function(){return{restrict:"E",templateUrl:"app/partials/clearButton.html",controller:"ClearOptionsController"}}).directive("selectVideoButton",function(){return{restrict:"E",templateUrl:"app/partials/selectVideoButton.html",controller:"SelectVideoOptionsController"}}).directive("videoPlayer",function(){return{restrict:"E",templateUrl:"app/partials/videoPlayer.html"}}),angular.module("mainApp").service("ToolsService",function(){var a=null,b=null,c=null,d=function(b){a=b},e=function(){return a},f=function(a){b=a},g=function(){return b},h=function(a){c=a},i=function(){return c};return{setTool:d,getTool:e,setColor:f,getColor:g,setBrushThickness:h,getBrushThickness:i}});